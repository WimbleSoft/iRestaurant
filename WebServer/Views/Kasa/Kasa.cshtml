@model iRestaurant.Controllers.ViewModelDemoVM
@{

    ViewBag.Title = "Kasa";
    int counter2 = 0;

}
<script>
    var subeId = "@Session["subeId"]";
    var sirketId = "@Session["sirketId"]";
    setInterval( //TARİH SAAT AYARLAR
        function () {
            var date = new Date();
            var dateDay = date.getDate();
            var dateMonth = date.getMonth()+1;
            var timeHours = date.getHours();
            var timeMinutes = date.getMinutes();
            if (date.getDate() <= 9) dateDay = "0" + dateDay;
            if (date.getMonth() + 1 <= 9) dateMonth = "0" + dateMonth;
            if (date.getHours() <= 9) timeHours = "0" + timeHours;
            if (date.getMinutes() <= 9) timeMinutes = "0" + timeMinutes;
            $("#tarihsaat").empty();
            $("#tarihsaat").append(date.getFullYear() + '.' + dateMonth + '.' + dateDay + ' - ' + timeHours + ':' + timeMinutes);
        }, 1000);
</script>
<!doctype html>
<html style="background-color:#303030; ">
<head>
    <meta charset="UTF-8">
    <!--IE Compatibility modes-->
    <meta http-equiv="X-UA-Compatible" content="IE=11">
    <!--Mobile first-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>iRestaurant - Kasa</title>

    <meta name="description" content="Sirus Yazılım iRestaurant">
    <meta name="author" content="">

    <meta name="msapplication-TileColor" content="#5bc0de" />
    <meta name="msapplication-TileImage" content="assets/img/metis-tile.png" />
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <title>@ViewBag.Title</title>
    @Styles.Render("~/bundles/as/css")
    @Scripts.Render("~/bundles/as/js")
    <script>
        $.ajax({
            cache: false
        });
    </script>
    <style>
        input[type="text"] {
            background: transparent !important;
            border: none !important;
        }
    </style>
    <link rel="stylesheet" href="~/assets/lib/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="~/assets/css/main.css">
</head>
<body id="body">
    <div class="row">
        @if (!((bool)Session["webView"] == true))
        {
            <div id="poweroff" class="modal">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <header>
                                <h4 style="align-self:center; align-items:center; text-align:center;">
                                    ÇIKIŞ YAP
                                </h4>
                            </header>
                        </div>
                        <div class="modal-body" style="padding:0px !important;">
                            <div class="row" style="margin-left:0px !important; margin-right:0px !important;">
                                <div class="col-xs-12" style="background-color:#222222; text-align:center;">
                                    <div class="row" style="background-color:#BBBBBB;color:black; text-align:center;">
                                        SAYIN @Session["personelAd"]
                                    </div>
                                    <div class="row" style="background-color:#222222;color:white; text-align:center;">
                                        ÇIKIŞ YAPABİLMENİZ İÇİN ŞİFRENİZİ YENİDEN GİRMENİZ GEREKLİDİR
                                    </div>
                                </div>
                                <div class="row" style="margin-left:0px !important; margin-right:0px !important; text-align:center; font-size:22px;">
                                    <br>
                                    <br>
                                </div>

                                <div class="row" style="margin-left:0px !important; margin-right:0px !important; text-align:center; font-size:22px;">
                                    <input type="password" placeholder="Yönetici Parolanız" id="personelParola" />
                                </div>
                            </div>
                            <div class="row" style="margin-top:15px; margin-bottom:15px; margin-left:0px !important; margin-right:0px !important;">
                                <div class="col-xs-4">

                                </div>
                                <div class="col-xs-4">
                                    <a style="min-width:100%; max-width:150px" class="btn btn-grad btn-danger" onclick="cikisYap()"><i class="fa fa-power-off"></i></a>
                                </div>
                                <div class="col-xs-4">

                                </div>
                            </div>
                        </div>
                        <div class="modal-footer" style="padding:0px !important; border-top: none !important;">

                        </div>
                    </div>
                </div>
            </div>
        }
        @if ((bool)Session["webView"] == true)
        {
            <script>

            </script>
        }
    </div>
    <div class="bg-light dk" id="wrap">
        <div id="top">
            <!-- .navbar -->
            <nav class="navbar-inverse navbar-static-top">
                <div class="container-fluid" style="padding:0px !important;">
                    <!---GICIK YER BAŞLANGIÇ-->
                    <div class="col-lg-12" style="text-align:right; vertical-align:middle; padding:0px !important; margin-top:5px; margin-bottom:5px; margin-left:unset !important; margin-right:unset !important; color:white; font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">
                        <div class="btn-group" style="">
                            <a class="btn btn-grad btn-lg btn-info" style="" onclick="ciroDokumYenile()" data-toggle="modal" data-original-title="Help" data-placement="bottom" href="#gunlukCikti"><i class="fa fa-try"></i> Ciro Dökümü</a>
                            <a class="btn btn-grad btn-lg btn-metis-4" style="" onclick="return deneme()"><i class="fa fa-calendar"></i> <span id="tarihsaat"></span></a>
                            @if (!((bool)Session["webView"] == true))
                            {
                                <a class="btn btn-grad btn-lg btn-warning" style="min-height:46px;" onclick="" data-toggle="modal" data-original-title="Help" data-placement="bottom" href="#poweroff"><i class="fa fa-power-off"></i><span> </span></a>
                            }
                        </div>
                    </div>
                </div>
                <!-- /.container-fluid -->
            </nav>
            <!-- /.navbar -->
            <!-- /.head -->
        </div>
        <!-- /#top -->
        <!---GICIK YER BİTİŞ-->
        @{
            DateTime sabahTarihSaat = DateTime.Now.Date.AddHours(3);//KASADA GÖZÜKEN O GÜN SABAH SAAT 6'DAN
            DateTime geceTarihSaat = DateTime.Now.Date.AddDays(1).AddHours(3);//KASADA GÖZÜKEN O GÜN GECE 24'TEN SONRAKİ 3 SAATE KADAR
            if (DateTime.Now.TimeOfDay <= new TimeSpan(3, 0, 0) && DateTime.Now.TimeOfDay >= new TimeSpan(0, 0, 0))
            {
                sabahTarihSaat = DateTime.Now.Subtract(new TimeSpan(24, 0, 0));
                geceTarihSaat = DateTime.Now;
            }
        }
        <div id="content">
            <div class="outer">
                <div class="inner bg-dark lter" style="padding:0px !important;">
                    <div class="row" style="padding:0px !important; margin:0px !important;" id="masaListesi">
                        <div class="row" style="margin:0px!important; padding:0px !important;">
                            <!--HER BİR MASA - BAŞLANGIÇ-->
                            @foreach (var masa2 in Model.Masalar.ToList())
                            {
                                <div class="col-xs-6 col-lg-2 col-sm-4 col-md-2 ui-sortable" style="padding:0px !important; min-height: 250px !important; max-width:152px !important">
                                    <div class="box" style="position: relative; left: 0px; top: 0px; border:none !important;">
                                        <div class="row" style="margin-left:5px !important; margin-right:5px !important;">
                                            <div class="row btn btn-app btn-lg @if (masa2.durum == true) {<text>btn-success</text> } else {<text>btn-danger</text>}" style="min-height: 226px !important; min-width:100%; max-width: 100% !important; padding-top:1px !important; padding-bottom:1px !important;padding-left:1px !important; padding-right:1px !important; margin-left:0px !important; margin-right:0px !important;">
                                                <div class="row" style="margin-left: 0px !important; margin-right: 0px !important; min-height:30px !important;">
                                                    @if (Model.Oturumlar.Where(x => x.odendi == false && x.masaId == masa2.masaId).ToList().FirstOrDefault() != null)
                                                    {
                                                    <div id="DIVhesapIstendiMi_@Model.Oturumlar.Where(x => x.odendi == false && x.masaId == masa2.masaId).ToList().FirstOrDefault().oturumId" class="col-xs-12 col-md-12 col-sm-12 col-lg-12" style="">
                                                        @if (Model.Oturumlar.Where(x => x.odendi == false && x.masaId == masa2.masaId).FirstOrDefault().hesapIstendi == true)
                                                        {
                                                            <a style='font-size:12px' class='btn btn-info btn-sm btn-grad' name='hesapIstendiMi_@Model.Oturumlar.Where(x => x.odendi == false && x.masaId == masa2.masaId).ToList().FirstOrDefault().oturumId' id='hesapIstendiMi_@Model.Oturumlar.Where(x => x.odendi == false && x.masaId == masa2.masaId).ToList().FirstOrDefault().oturumId' onclick='hesapGonder(this)'>Hesap İstendi &times;</a>
                                                        }
                                                    </div>
                                                    }
                                                    else
                                                    {
                                                    <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">

                                                    </div>
                                                    }
                                                </div>
                                                <div class="row" style="margin-left: 0px !important; margin-right: 0px !important; padding-top: 30px; margin-top: -30px !important; padding-bottom:30px !important; margin-bottom:-30px !important;">
                                                    <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12" style="padding-left:0px !important; padding-right:0px !important;">
                                                        <a style="font-size:100px; text-decoration:none;" data-toggle="modal" data-original-title="Help" data-placement="bottom" @if (Model.Oturumlar.Where(x => x.odendi == false && x.masaId == masa2.masaId).ToList().FirstOrDefault() != null) { <text> id="hrefModalHref" onclick="oturumDetayGetir(@Model.Oturumlar.Where(x => x.odendi == false && x.masaId == masa2.masaId).ToList().FirstOrDefault().oturumId)" href="#helpModal" </text>    }>
                                                            <div class="row" style="padding-top:1px !important; padding-bottom:1px !important;padding-left:1px !important; padding-right:1px !important; margin-left:0px !important; margin-right:0px !important; color:white;  font-size:22px !important;">
                                                                @masa2.Katlar.katAd
                                                            </div>
                                                            <div class="row" style="padding-top:0px !important; padding-bottom:0px !important;padding-left:0px !important; padding-right:0px !important; margin-left:0px !important; margin-right:0px !important;">
                                                                <i class="fa fa-tablet"></i>
                                                            </div>
                                                            <div class="row" style="padding-top:1px !important; padding-bottom:1px !important;padding-left:1px !important; padding-right:1px !important; margin-left:0px !important; margin-right:0px !important; color:white;  font-size:22px !important;">
                                                                @masa2.masaAd
                                                            </div>
                                                        </a>
                                                    </div>
                                                </div>
                                                <div class="row" style="margin-left: 0px !important; margin-right: 0px !important; min-height:30px !important;">
                                                    @if (Model.Oturumlar.Where(x => x.odendi == false && x.masaId == masa2.masaId).ToList().FirstOrDefault() != null)
                                                    {
                                                    <div id="DIVgarsonCagirildiMi_@Model.Oturumlar.Where(x => x.odendi == false && x.masaId == masa2.masaId).ToList().FirstOrDefault().oturumId" class="col-xs-12 col-md-12 col-sm-12 col-lg-12" style="">
                                                        @if (Model.Oturumlar.Where(x => x.odendi == false && x.masaId == masa2.masaId).ToList().FirstOrDefault().garsonIstendi == true)
                                                        {
                                                            <a style='font-size:12px' class='btn btn-metis-3 btn-sm btn-grad' name='garsonCagirildiMi_@Model.Oturumlar.Where(x => x.odendi == false && x.masaId == masa2.masaId).ToList().FirstOrDefault().oturumId' id='garsonCagirildiMi_@Model.Oturumlar.Where(x => x.odendi == false && x.masaId == masa2.masaId).ToList().FirstOrDefault().oturumId' onclick='garsonGonder(this)'>Garson İstendi &times;</a>
                                                        }
                                                    </div>
                                                    }
                                                    else
                                                    {
                                                    <div class="col-xs-12 col-md-12 col-sm-12 col-lg-12">

                                                    </div>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                counter2++;
                            }
                            <!--HER BİR MASA - BAŞLANGIÇ-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row bg-light">
            <div id="gunlukCikti" class="modal">
                <div class="modal-dialog" style="width:55%;">
                    <div class="modal-content" id="gunlukCikti_content">
                        <div class="modal-header">
                            <header>
                                <h4 style="align-self:center; align-items:center; text-align:center;">
                                    CİRO DÖKÜMÜ
                                </h4>
                            </header>
                        </div>
                        <div class="modal-body" style="padding:0px !important;">
                            <div class="row" style="margin-left:0px !important; margin-right:0px !important;">
                                <div class="col-xs-12" style="background-color:#222222; text-align:center;">
                                    <table style="background-color:#222222; text-align:center;">
                                        <tbody>
                                            <tr>
                                                <td style="color:white; text-align:center;">
                                                    <i>Günlük Ciro Dökümü</i>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="row btn-metis-3" style="margin-left:0px !important; margin-right:0px !important; text-align:center; font-size:22px;">
                                    @if (Model.OdemeTurleri[0] != null)
                                    {
                                        <div class="col-xs-2 " style="border-right:1px solid cyan;">@Model.OdemeTurleri[0].odemeTurAd @Model.OdemeTurleri[0].ParaBirimleri.paraBirimiAd</div>
                                    }
                                    @if (Model.OdemeTurleri[1] != null)
                                    {
                                        <div class="col-xs-2 " style="border-right:1px solid cyan;">@Model.OdemeTurleri[1].odemeTurAd @Model.OdemeTurleri[1].ParaBirimleri.paraBirimiAd</div>
                                    }
                                    @if (Model.OdemeTurleri[2] != null)
                                    {
                                        <div class="col-xs-2 " style="border-right:1px solid cyan;">@Model.OdemeTurleri[2].odemeTurAd @Model.OdemeTurleri[2].ParaBirimleri.paraBirimiAd</div>
                                    }
                                    @if (Model.OdemeTurleri[3] != null)
                                    {
                                        <div class="col-xs-2 " style="border-right:1px solid cyan;">@Model.OdemeTurleri[3].odemeTurAd @Model.OdemeTurleri[3].ParaBirimleri.paraBirimiAd</div>
                                    }
                                    @if (Model.OdemeTurleri[4] != null)
                                    {
                                        <div class="col-xs-2 " style="border-right:1px solid cyan;">@Model.OdemeTurleri[4].odemeTurAd @Model.OdemeTurleri[4].ParaBirimleri.paraBirimiAd</div>
                                    }
                                    @if (Model.OdemeTurleri[5] != null)
                                    {
                                        <div class="col-xs-2 ">@Model.OdemeTurleri[5].odemeTurAd @Model.OdemeTurleri[5].ParaBirimleri.paraBirimiAd</div>
                                    }
                                </div>
                                <div class="row btn-metis-5" style="margin-left:0px !important; margin-right:0px !important; text-align:center;  font-size:20px;">
                                    @foreach (var odemeTuru in Model.OdemeTurleri)
                                    {
                                        <div id="gunluk_@odemeTuru.odemeTurAd" class="col-xs-2 " style="border-right:1px solid cyan;">
                                            @odemeTuru.Odemeler.Where(x => x.odemeTarihi >= sabahTarihSaat && x.odemeTarihi <= geceTarihSaat).Sum(x => x.odemeMiktar)
                                        </div>
                                    }

                                </div>
                            </div>
                        </div>
                        <div class="row" style="margin-left:0px !important; margin-right:0px !important;">
                            <div class="col-xs-12" style="background-color:#222222;">
                                <table style="background-color:#222222;">
                                    <tbody>
                                        <tr>
                                            <td style="color:white">
                                                <i>Tarih Aralığına Bağlı Ciro Dökümü:</i>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="row" style="margin-left:0px !important; margin-right:0px !important;">
                            <div class="col-xs-2">
                            </div>
                            <div class="col-xs-4">
                                <label>Başlangıç:</label>
                                <!-- /.input group -->
                                <div class='input-group date' id='baslangictarihi1'>
                                    <input type='text' id="baslangictarihi" name="baslangictarihi" class="form-control" onmouseover="takvimleriAktiflestir()" value="@sabahTarihSaat.ToString("dd.MM.yyyy HH:mm")" />
                                    <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-calendar">
                                        </span>
                                    </span>
                                </div>
                            </div>
                            <div class="col-xs-4">
                                <label>Bitiş:</label>
                                <!-- /.input group -->
                                <div class='input-group date' id='bitistarihi1'>
                                    <input type='text' id="bitistarihi" name="bitistarihi" class="form-control" onmouseover="takvimleriAktiflestir()" value="@geceTarihSaat.ToString("dd.MM.yyyy HH:mm")" />
                                    <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-calendar">
                                        </span>
                                    </span>
                                </div>
                            </div>
                            <div class="col-xs-2">
                            </div>
                        </div>
                        <div class="row" style="margin-top:15px; margin-bottom:15px; margin-left:0px !important; margin-right:0px !important;">
                            <div class="col-xs-4">

                            </div>
                            <div class="col-xs-4">
                                <a style="min-width:100%;" class="btn btn-grad btn-info" onclick="tariheGoreDokumGetir()">Döküm Al</a>
                            </div>
                            <div class="col-xs-4">

                            </div>
                        </div>
                        <div class="row" id="tarihselDokumYeri" hidden="hidden" style="margin-top:15px; margin-bottom:15px; margin-left:0px !important; margin-right:0px !important;">
                            <!--HA BURAYA LOAD OLACAK-->
                            <div class="row" style="margin-left:0px !important; margin-right:0px !important;">
                                <div class="col-lg-12" style="background-color:#222222; text-align:center;">
                                    <table style="background-color:#222222; text-align:center;">
                                        <tbody>
                                            <tr>
                                                <td style="color:white; text-align:center;"><i>Seçili Tarihler Arası Ciro Dökümü</i></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="row btn-metis-3" style="margin-left:0px !important; margin-right:0px !important; text-align:center; font-size:22px;">
                                @if (Model.OdemeTurleri[0] != null)
                                {
                                    <div class="col-md-2 col-lg-2" style="border-right:1px solid cyan;">@Model.OdemeTurleri[0].odemeTurAd @Model.OdemeTurleri[0].ParaBirimleri.paraBirimiAd</div>
                                }
                                @if (Model.OdemeTurleri[1] != null)
                                {
                                    <div class="col-md-2 col-lg-2" style="border-right:1px solid cyan;">@Model.OdemeTurleri[1].odemeTurAd @Model.OdemeTurleri[1].ParaBirimleri.paraBirimiAd</div>
                                }
                                @if (Model.OdemeTurleri[2] != null)
                                {
                                    <div class="col-md-2 col-lg-2" style="border-right:1px solid cyan;">@Model.OdemeTurleri[2].odemeTurAd @Model.OdemeTurleri[2].ParaBirimleri.paraBirimiAd</div>
                                }
                                @if (Model.OdemeTurleri[3] != null)
                                {
                                    <div class="col-md-2 col-lg-2" style="border-right:1px solid cyan;">@Model.OdemeTurleri[3].odemeTurAd @Model.OdemeTurleri[3].ParaBirimleri.paraBirimiAd</div>
                                }
                                @if (Model.OdemeTurleri[4] != null)
                                {
                                    <div class="col-md-2 col-lg-2" style="border-right:1px solid cyan;">@Model.OdemeTurleri[4].odemeTurAd @Model.OdemeTurleri[4].ParaBirimleri.paraBirimiAd</div>
                                }
                                @if (Model.OdemeTurleri[5] != null)
                                {
                                    <div class="col-md-2 col-lg-2">@Model.OdemeTurleri[5].odemeTurAd @Model.OdemeTurleri[5].ParaBirimleri.paraBirimiAd</div>
                                }

                            </div>
                            <div class="row btn-metis-5" style="margin-left:0px !important; margin-right:0px !important; text-align:center;  font-size:20px;">
                                @if (Model.OdemeTurleri[0] != null)
                                {
                                    <div class="col-md-2 col-lg-2" style="border-right:1px solid cyan;" id="tariheGore_@Model.OdemeTurleri[0].odemeTurAd">---</div>
                                }
                                @if (Model.OdemeTurleri[1] != null)
                                {
                                    <div class="col-md-2 col-lg-2" style="border-right:1px solid cyan;" id="tariheGore_@Model.OdemeTurleri[1].odemeTurAd">---</div>
                                }
                                @if (Model.OdemeTurleri[2] != null)
                                {
                                    <div class="col-md-2 col-lg-2" style="border-right:1px solid cyan;" id="tariheGore_@Model.OdemeTurleri[2].odemeTurAd">---</div>
                                }
                                @if (Model.OdemeTurleri[3] != null)
                                {
                                    <div class="col-md-2 col-lg-2" style="border-right:1px solid cyan;" id="tariheGore_@Model.OdemeTurleri[3].odemeTurAd">---</div>
                                }
                                @if (Model.OdemeTurleri[4] != null)
                                {
                                    <div class="col-md-2 col-lg-2" style="border-right:1px solid cyan;" id="tariheGore_@Model.OdemeTurleri[4].odemeTurAd">---</div>
                                }
                                @if (Model.OdemeTurleri[5] != null)
                                {
                                    <div class="col-md-2 col-lg-2" id="tariheGore_@Model.OdemeTurleri[5].odemeTurAd">---</div>
                                }
                            </div>
                            <div class="row" style="margin-top:15px; margin-bottom:15px; margin-left:0px !important; margin-right:0px !important;">
                                <div class="col-lg-4">
                                </div>
                                <div class="col-lg-4">
                                    <a style="min-width:100%;" class="btn btn-grad btn-success" onclick="dokumAlJs()">Yazdır</a>
                                </div>
                                <div class="col-lg-4">
                                </div>
                            </div>
                            <!--HA BURAYA LOAD OLACAK-->
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="padding:0px !important; border-top: none !important;">

                </div>
            </div>
        </div>
        <div class="row" id="oturumModal">
            <div class="row" id="helpModal2">
                <div id="helpModal" class="modal">
                    <div class="modal-dialog" id="modaldialog_" style="width:92% !important;">
                        <div class="modal-content" id="modalContent">

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /#wrap -->
    </div>
    <div id="footer" class="Footer bg-light dker">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="padding:0px !important; margin:0px !important;">
            <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4" style="text-align:left; vertical-align:middle;">
                <p id="masalardaToplam">
                    <i class="fa fa-try"></i>
                </p>
            </div>
            <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4" style="text-align:center;">
                <p>
                    2017 &copy;
                    <span>Sirus Yazılım<i class="fa fa-world"></i></span>
                </p>
            </div>
            <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4" style="text-align:right; vertical-align:middle;">
                <p id="kasadaToplam">
                    <i class="fa fa-try"></i>
                </p>
            </div>
        </div>
    </div>
<!-- /#footer -->
<input hidden="hidden" id="katDegeri" value="@(Request.Url.PathAndQuery.ToString())" />
<script>
    setInterval(function masaYenile() {
        if ($("#body").attr("class") != "modal-open") {
            $.ajax({
                type: "POST",
                url: "/Kasa/Masalar",
                dataType: "json",
                async: false,
                data: { oturumId: 0, subeId: subeId },
                success: function (data) {
                    if (data) {
                        $("#masaListesi").empty();
                        $('#masaListesi').html(data.responseText);
                    }
                    else {
                        alert("zamanında yüklenemedi");
                    }
                },
                error: function (data) {
                    if (data) {
                        $("#masaListesi").empty();
                        $('#masaListesi').html(data.responseText);
                    }
                    else {
                        alert("zamanında yüklenemedi");
                    }
                }
            });
        }
    }, 5000);
    setInterval(function footerYenile() {
        $.ajax({
            url: "/Kasa/Footer",
            type: "POST",
            dataType: "json",
            contentType: "application/json",
            data: JSON.stringify({ subeId: subeId }),
            traditional: true,
            success: function (obj) {
                if (obj == 1) {
                    alertHata();
                }
                else if (obj == -1) {
                    alertLoginHatasi();
                }
                else {
                    $('#masalardaToplam').empty().show().html("Masalarda Toplam: " + obj.masalardaToplamObj + ' <i class="fa fa-try"></i>' );
                    $('#kasadaToplam').empty().show().html("Kasada Toplam: " + obj.kasadaToplamObj + ' <i class="fa fa-try"></i>');
                }
            }
        });

    }, 5000);
    function oturumDetayGetir(oturumId) {
        $.ajax({
            type: "POST",
            url: "/Kasa/Oturumlar",
            dataType: "json",
            async: false,
            data:{ oturumId:oturumId, subeId: subeId },
            success: function (data) {
                if(data){
                    $("#modalContent").empty();
                    $('#modalContent').html(data.responseText);
                }
                else{
                    alert("zamanında yüklenemedi");
                }
            },
            error:function (data) {
                if(data){
                    $("#modalContent").empty();
                    $('#modalContent').html(data.responseText);
                }
                else{
                    alert("zamanında yüklenemedi");
                }
            }
        });
    }
    function masaDegistir(oturumId){
        var yeniMasaId = $("#donusecekMasa_"+oturumId).val();
        $.ajax({
            url: "/Kasa/MasaDegistir",
            type: "POST",
            dataType: "json",
            contentType: "application/json",
            data: JSON.stringify({ oturumId: oturumId, yeniMasaId: yeniMasaId, subeId: subeId }),
            traditional: true,
            success: function (data2) {
                if (data2) {
                    //location.reload(true);
                    $.ajax({
                        type: "POST",
                        url: "/Kasa/Masalar",
                        dataType: "json",
                        async: false,
                        data: { oturumId: oturumId, subeId: subeId },
                        success: function (data) {
                            if (data) {
                                $("#masaListesi").empty();
                                $('#masaListesi').html(data.responseText);
                            }
                            else {
                                alert("zamanında yüklenemedi");
                            }
                        },
                        error: function (data) {
                            if (data) {
                                $("#masaListesi").empty();
                                $('#masaListesi').html(data.responseText);
                            }
                            else {
                                alert("zamanında yüklenemedi");
                            }
                        }
                    });
                }
                else {
                    alert("Bi hata oldu!");
                }
            }
        });
    }
    if ($("#body").attr("class") != "modal-open") {
        $.ajax({
            url: '/Kasa/GarsonCagiranVarMi',
            type: 'POST',
            dataType: 'json',
            contentType: "application/json",
            data: JSON.stringify({ subeId: subeId }),
            success: function (garsonCagiranList) {
                var array2 = garsonCagiranList;
                if (array2 != null) {
                    for (var i = 0; i < array2.length; i++) {

                        $('#DIVgarsonCagirildiMi_' + array2[i]).html("<a style='font-size:12px' class='btn btn-metis-3 btn-sm btn-grad' name='garsonCagirildiMi_" + array2[i] + "' id='garsonCagirildiMi_" + array2[i] + "' onclick='garsonGonder(this)'>Garson İstendi &times;</a>");
                        $('#garsonCagirildiMi_' + array2[i]).pulsate({
                            color: "#8BC13D",
                            repeat: true
                        });

                    }
                }
            }
        });
    }
    if ($("#body").attr("class") != "modal-open") {
        $.ajax({
            url: '/Kasa/HesapIsteyenVarMi',
            type: 'POST',
            dataType: 'json',
            contentType: "application/json",
            data: JSON.stringify({ subeId: subeId }),
            success: function (hesapIsteyenList) {
                var array4 = hesapIsteyenList;
                if (array4 != null) {
                    for (var i = 0; i < array4.length; i++) {
                        $('#DIVhesapIstendiMi_' + array4[i]).html("<a style='font-size:12px' class='btn btn-info btn-sm btn-grad'  name='hesapIstendiMi_" + array4[i] + "' id='hesapIstendiMi_" + array4[i] + "' onclick='hesapGonder(this)'>Hesap İstendi &times;</a>");
                        $('#hesapIstendiMi_' + array4[i]).pulsate({
                            color: "#09f",
                            repeat: true
                        });

                    }
                }
            }
        });
    }
    function garsonGonder(item) {
        var array = item.name.split('_');
        $('#DIVgarsonCagirildiMi_' + array[1]).empty();
        $.ajax({
            url: '/Kasa/GarsonGonder',
            type: 'POST',
            dataType: 'json',
            contentType: "application/json",
            data: JSON.stringify({ oturumId: array[1], subeId: subeId}),
            success: function (data) {
            }
        });
    }

    function hesapGonder(item) {

        var array3 = item.name.split('_');
        $('#DIVhesapIstendiMi_' + array3[1]).empty();
        if ("@Session["webView"].ToString()"=="True")
        {
        @{
            if (Session["webView"].ToString() == "True") {
            <text>
            BrowserMethods.hesapGonder(array3[1], subeId);

            </text>
            }
        }
        }
        else
        {
            alert("Hesap yazdırma işlemini kullanabilmeniz için, masaüstü uygulamamızı indirmeniz gerekmektedir.");
        }
    }

    function adisyonFisiYazdir(oturumId) {
        if ("@Session["webView"].ToString()" == "True") {
        @{
            if (Session["webView"].ToString() == "True") {
            <text>
            BrowserMethods.adisyonFisiYazdir(oturumId, subeId);

            </text>
            }
        }
        }
        else {
            alert("Adisyon fişi yazdırma işlemini kullanabilmeniz için, masaüstü uygulamamızı indirmeniz gerekmektedir.");
        }
    }
    function dokumAlJs() {
        if ("@Session["webView"].ToString()" == "True") {
        @{
            if (Session["webView"].ToString() == "True")
            {
                <text>
                if (confirm('Bu tarihler arasında döküm almak istediğimize emin misiniz?')) {
                    var baslangicTarihi = $("#baslangictarihi").val();
                    var bitisTarihi = $("#bitistarihi").val();
                    if (baslangicTarihi != "" && bitisTarihi != "") {
                        BrowserMethods.dokumAl(baslangicTarihi, bitisTarihi, subeId);
                    }
                    else {
                        alert("Değerler boş olamaz");
                    }

                }
                </text>
            }
        }
        }
        else {
            alert("Döküm yazdırma işlemini kullanabilmeniz için, masaüstü uygulamamızı indirmeniz gerekmektedir.");
        }

    }
    function tariheGoreDokumGetir() {
        var baslangicTarihi = $("#baslangictarihi").val();
        var bitisTarihi = $("#bitistarihi").val();
        if (baslangicTarihi != "" && bitisTarihi != "") {
            $.ajax({
                type: 'POST',
                url: '/Kasa/KasaDokumu/',
                dataType: 'json',
                data: { baslangicTarihi: baslangicTarihi, bitisTarihi: bitisTarihi, subeId: subeId },
                async: false,
                success: function (ciroList) {
                    if (ciroList == -1) {
                        alertLoginHatasi();
                    }
                    else if (ciroList == 1) {
                        alertHata();
                    }
                    else
                    {
                        $('#tarihselDokumYeri').show();
                        ciroList.forEach(function (ciro) {
                            $('#tariheGore_' + ciro.odemeTurAd).empty().html(ciro.miktar);
                        });
                        /*
                        $('#tariheGore_nakit').empty().html(ciro.nakit);
                        $('#tariheGore_kredikarti').empty().html(ciro.kredikarti);
                        $('#tariheGore_ikram').empty().html(ciro.ikram);
                        $('#tariheGore_ticket').empty().html(ciro.ticket);
                        $('#tariheGore_multinet').empty().html(ciro.multinet);
                        $('#tariheGore_veresiye').empty().html(ciro.veresiye);
                        */
                    }
                }
            });
        }
        else {
            alert("Değerler boş olamaz");
        }
    }


    setInterval(function garsonCagiran() {
        if ($("#body").attr("class") != "modal-open") {
            $.ajax({
                url: '/Kasa/GarsonCagiranVarMi',
                type: 'POST',
                dataType: 'json',
                contentType: "application/json",
                data: JSON.stringify({ subeId: subeId }),
                success: function (garsonCagiranList) {
                    var array2 = garsonCagiranList;
                    if (array2 != null) {
                        for (var i = 0; i < array2.length; i++) {
                            $('#DIVgarsonCagirildiMi_' + array2[i]).html("<a style='font-size:12px' class='btn btn-metis-3 btn-sm btn-grad' name='garsonCagirildiMi_" + array2[i] + "' id='garsonCagirildiMi_" + array2[i] + "' onclick='garsonGonder(this)'>Garson İstendi &times;</a>");
                            $('#garsonCagirildiMi_' + array2[i]).pulsate({
                                color: "#8BC13D",
                                repeat: true
                            });

                        }
                    }
                }
            });
        }
    }, 10000);
    setInterval(function hesapIsteyen() {
        if ($("#body").attr("class") != "modal-open") {
            $.ajax({
                url: '/Kasa/HesapIsteyenVarMi',
                type: 'POST',
                dataType: 'json',
                contentType: "application/json",
                data: JSON.stringify({ subeId: subeId }),
                success: function (hesapIsteyenList) {
                    var array4 = hesapIsteyenList;
                    if (array4 != null) {
                        for (var i = 0; i < array4.length; i++) {
                            $('#DIVhesapIstendiMi_' + array4[i]).html("<a style='font-size:12px' class='btn btn-info btn-sm btn-grad'  name='hesapIstendiMi_" + array4[i] + "' id='hesapIstendiMi_" + array4[i] + "' onclick='hesapGonder(this)'>Hesap İstendi &times;</a>");
                            $('#hesapIstendiMi_' + array4[i]).pulsate({
                                color: "#09f",
                                repeat: true
                            });

                        }
                    }
                }
            });
        }
    }, 10000);

    function oturumuKapat(oturumId){
        $.ajax({
            url: "/Kasa/OturumuKapat",
            type: "POST",
            dataType: "json",
            contentType: "application/json",
            data: JSON.stringify({oturumId:oturumId, subeId: subeId}),
            success: function (oturumKapandiMi) {
                if (oturumKapandiMi == true) {
                    location.reload(true);
                }
                else {
                    alert("Siparişi bulunan oturumları ödeme almadan kapatamazsınız. Bu özellik, yanlışlıkla açılan boş oturumları kapatmak içindir!");
                }

            }

        });
    }

    function ciroDokumYenile() {
        //$("#helpModal_" + oturumId).modal('toggle');
        $.ajax({
            type: 'POST',
            url: '/Kasa/GunlukCiroGetir/',
            dataType: 'json',
            data: { subeId: subeId },
            async: false,
            success: function (ciro) {
                if (ciro ==-1 ) {
                    alertLoginHatasi();
                }
                else if (ciro == 1){
                    alertHata();
                }
                else {
                    $('#gunluk_nakit').empty().html(ciro.nakit);
                    $('#gunluk_kredikarti').empty().html(ciro.kredikarti);
                    $('#gunluk_ikram').empty().html(ciro.ikram);
                    $('#gunluk_ticket').empty().html(ciro.ticket);
                    $('#gunluk_multinet').empty().html(ciro.multinet);
                    $('#gunluk_veresiye').empty().html(ciro.veresiye);
                }
            }
        });
        //var loaded = $.load("/Kasa/Kasa #gunlukCikti_content");
        //$("#gunlukCikti_content").empty();
        //$("#gunlukCikti_content").load(loaded);
    }




    $.datetimepicker.setLocale('tr');
    function takvimleriAktiflestir()
    {
        $('#baslangictarihi').datetimepicker({
            format: 'd.m.Y H:i',
            //startDate: '@DateTime.Now.ToShortDateString() @DateTime.Now.ToShortTimeString()'
        });
        $('#bitistarihi').datetimepicker({
            format: 'd.m.Y H:i',
            //startDate: '@DateTime.Now.ToShortDateString() @DateTime.Now.ToShortTimeString()'
        });
    }

    function ekstrasizUrunIptal(iptal,oturumId) {
        var iptalEdilecekEkstrasizUrunDegerleri = iptal.name.split('_');
        var oturumId = iptalEdilecekEkstrasizUrunDegerleri[2];
        var urunOzellikId = iptalEdilecekEkstrasizUrunDegerleri[4];
        //var siparisAdedi = $('Ekstrasiz_' + oturumId + '_urunOzellikId_' + urunOzellikId + '_adet').val();
        $.ajax({
            url: "/Kasa/EkstrasizUrunIptal",
            type: "POST",
            dataType: "json",
            contentType: "application/json",
            data: JSON.stringify({ oturumId: oturumId, urunOzellikId: urunOzellikId, siparisAdedi: 1, subeId: subeId }),
            traditional: true,
            success: function (data2) {
            if (data2) {
                oturumDetayGetir(oturumId);
            /*
                $("#helpModal_" + oturumId).modal('toggle');
                $("#helpModal2_" + oturumId).empty();
                $("#helpModal2_" + oturumId).load("/Kasa/Kasa #helpModal_" + oturumId,function(){$("#helpModal_" + oturumId).modal("show");});
            */
            }
            else {
                alertLoginHatasi();
            }
        }
        });


    }
    function ekstraliUrunIptal(iptal,oturumId) {
        var iptalEdilecekEkstraliUrunDegerleri = iptal.name.split('_');
        var siparisUrunlerId = iptalEdilecekEkstraliUrunDegerleri[3];
        $.ajax({
            url: "/Kasa/EkstraliUrunIptal",
            type: "POST",
            dataType: "json",
            contentType: "application/json",
            data: JSON.stringify({ siparisUrunlerId: siparisUrunlerId, subeId: subeId }),
            traditional: true,
            success: function (data2) {
                if (data2) {
                    oturumDetayGetir(oturumId);
                    /*
                    $("#helpModal_" + oturumId).modal('toggle');
                    $("#helpModal2_" + oturumId).empty();
                    $("#helpModal2_" + oturumId).load("/Kasa/Kasa #helpModal_" + oturumId,function(){$("#helpModal_" + oturumId).modal("show");});
                    */
            }
            else {
                alertLoginHatasi();
            }
        }
        });
    }
    function kampanyaIptal(iptal,oturumId) {
        var iptalEdilecekKampanyaDegerleri = iptal.name.split('_');
        var oturumKampanyaId = iptalEdilecekKampanyaDegerleri[3];
        $.ajax({
            url: "/Kasa/KampanyaIptal",
            type: "POST",
            dataType: "json",
            contentType: "application/json",
            data: JSON.stringify({ oturumKampanyaId: oturumKampanyaId, subeId: subeId }),
            traditional: true,
            success: function (data2) {
                if (data2) {
                    oturumDetayGetir(oturumId);
                    /*
                    $("#helpModal_" + oturumId).modal('toggle');
                    $("#helpModal2_" + oturumId).empty();
                    $("#helpModal2_" + oturumId).load("/Kasa/Kasa #helpModal_" + oturumId,function(){$("#helpModal_" + oturumId).modal("show");});
                    */
                }
                else {
                    alertLoginHatasi();
                }
            }

        });
    }
    function tumunuSec(yazdirilacakOturumId) {
        $(document.getElementsByName('Ekstrasiz_' + yazdirilacakOturumId + '_adet')).each(function (item) {
            this.lastElementChild.selected = true;
            var zimbirtiDegerleri = $(this).attr('id').split('_');
            var oturumId = zimbirtiDegerleri[1];
            var urunOzellikId = zimbirtiDegerleri[3];
            var urunFiyatDizi = $('#Ekstrasiz_' + oturumId + '_urunOzellikId_' + urunOzellikId + '_urunFiyat').val().split(",");
            var urunFiyati = parseFloat(urunFiyatDizi[0] + "." + urunFiyatDizi[1]);
            var hesaplanacakAraToplam = '#Ekstrasiz_' + oturumId + '_urunOzellikId_' + urunOzellikId + '_araToplam';
            var adet = $(this).val();
            $(hesaplanacakAraToplam).val(parseFloat(urunFiyati * adet));
        });
        $(document.getElementsByName('Ekstralilar_check_' + yazdirilacakOturumId)).each(function () {

            var arr = $(this).val().split('_');
            $('#oturumId_' + yazdirilacakOturumId + '_siparisUrunlerId_' + arr[3]).attr('checked', true);

        });
        $(document.getElementsByName('Kampanyalilar_check_' + yazdirilacakOturumId)).each(function () {

            var arr2 = $(this).val().split('_');
            var checked = $('#oturumId_' + yazdirilacakOturumId + '_oturumKampanyaId_' + arr2[1]).attr('checked', true);;

        });

        hesapla(yazdirilacakOturumId);
    }

    function yazdir(yazdirilacak,odemeTurId) {
        $.ajax({
            cache: false
        });

        var yazdirilacakOturumId = parseInt(yazdirilacak.name);
        var oturumId = yazdirilacakOturumId;
        var asilOdemeMiktar = $('#araToplam_' + yazdirilacakOturumId).val();
        if (asilOdemeMiktar == 0) {
            alert("Hiçbir seçim yapmadınız.");
        }
        else {

            var odemeMiktarDizisi = asilOdemeMiktar.split('.');
            var odemeMiktar = parseInt(odemeMiktarDizisi[0]) + ',' + parseInt(odemeMiktarDizisi[1]);

            var ekstrasizlarSiparisUrunleri = []; //siparisUrunleriId'leri taşıyacak dizi tanımlanıyor.
            var kacAdetSiparisUrunu = [];//kaç adet ödeneceğini taşıyacak dizi tanımlanıyor.
            var ekstrasizlar = [];
            var ekstralilarinCheckboxDegerleriDizi = []; //Ekstralıların checkbox değerlerini taşıyacak dizi tanımlanıyor.
            var kampanyalilarinCheckboxDegerleriDizi = []; //Kampanyalıların checkbox değerlerini taşıyacak dizi tanımlanıyor.
            var yenilenebilirMi = false;
            var ekstrasizlarOdendi=false;
            var ekstralilarOdendi=false;
            var kampanyalilarlarOdendi=false;
            $(document.getElementsByName('Ekstrasiz_' + yazdirilacakOturumId + '_adet')).each(function (item) {

                var select = $(this).attr('siparisUrunIdsi');
                ekstrasizlar.push({ siparisAdedi: $(this).val(), urunOzellikId: select, oturumId: yazdirilacakOturumId });
            });
            $(document.getElementsByName('Ekstralilar_check_' + yazdirilacakOturumId)).each(function () {
                var arr = $(this).val().split('_');
                var checked = $('#oturumId_' + yazdirilacakOturumId + '_siparisUrunlerId_' + arr[3]).is(':checked');
                if (checked == true) {
                    ekstralilarinCheckboxDegerleriDizi.push({ siparisUrunlerId: arr[3] });
                }
            });
            $(document.getElementsByName('Kampanyalilar_check_' + yazdirilacakOturumId)).each(function () {
                var arr2 = $(this).val().split('_');
                var checked = $('#oturumId_' + yazdirilacakOturumId + '_oturumKampanyaId_' + arr2[1]).is(':checked');
                if (checked == true) {
                    kampanyalilarinCheckboxDegerleriDizi.push({ oturumKampanyaId: arr2[1] });
                }
            });

            //AL AMK ŞEYİ AĞAÇ POSTLAMA BUNA DENİR
            $.ajax({
                type: 'POST',
                url: '/Kasa/OdemeAl/',
                dataType: 'json',
                data: { oturumId: oturumId, odemeMiktar: odemeMiktar, odemeTurId: odemeTurId, subeId: subeId },
                success: function(){
                    try{
                        //EKSTRALILAR KONTROL BAŞLAR
                        $.ajax({
                            url: "/Kasa/EkstralilarinCheckboxDegerleriDiziHandler",
                            type: "POST",
                            dataType: "json",
                            contentType: "application/json",
                            data: JSON.stringify({ ekstralilarinCheckboxDegerleriDizi: ekstralilarinCheckboxDegerleriDizi, oturumId: oturumId, subeId: subeId}),
                            success:function(data1){
                                if(data1==true){
                                    ekstralilarOdendi=true;
                                    //EKSTRASIZLAR KONTROL BAŞLAR
                                    $.ajax({
                                        url: "/Kasa/EkstrasizlarHandler",
                                        type: "POST",
                                        dataType: "json",
                                        contentType: "application/json",
                                        data: JSON.stringify({ ekstrasizlar, oturumId: oturumId, subeId: subeId}),
                                                success:function(data2){
                                                    if(data2==true){
                                                        ekstrasizlarOdendi=true;
                                                        //KAMPANYALILAR KONTROL BAŞLAR
                                                        $.ajax({
                                                            url: "/Kasa/KampanyalilarinCheckboxDegerleriDiziHandler",
                                                            type: "POST",
                                                            dataType: "json",
                                                            contentType: "application/json",
                                                            data: JSON.stringify({ kampanyalilarinCheckboxDegerleriDizi, oturumId: oturumId, subeId: subeId}),
                                                            success: function (data3) {
                                                                if(data3==true){
                                                                    kampanyalilarlarOdendi=true;
                                                                    try{
                                                                        //if(ekstralilarOdendi&&ekstrasizlarOdendi&&kampanyalilarlarOdendi){
                                                                        $.ajax({
                                                                            url: "/Kasa/TamamiOdendiMi",
                                                                            type: "POST",
                                                                            async:false,
                                                                            dataType: "json",
                                                                            data: {oturumId:oturumId},
                                                                            success: function (tamamiOdendiMi) {
                                                                                if (tamamiOdendiMi == true) {
                                                                                    //setInterval(function () {
                                                                                    location.reload(true);

                                                                                    //}, 3000);
                                                                                }
                                                                                else {
                                                                                    oturumDetayGetir(oturumId);
                                                                                }

                                                                            }
                                                                        });
                                                                        //}
                                                                    }catch(error){

                                                                        console(error.message);

                                                                    };
                                                                }
                                                            }
                                                        });
                                                    }
                                                }
                                    });
                                }

                            }
                        });
                    }
                    catch(error){
                        console(error.message);
                    };
                }
            });

            /*
            //HER TEK TEK ÖDEMENİN YAZICIDAN ÇIKTISINI ALDIRIR. BU AKTİF OLURSA, TamamiOdendiMi fonksiyonundaki tümünü yazdırma deaktif yapılmalıdır.
            $.ajax({
                url: "/Kasa/FisYazdir",
                type: "POST",
                dataType: "json",
                contentType: "application/json",
                data: JSON.stringify({ ekstralilarinCheckboxDegerleriDizi: ekstralilarinCheckboxDegerleriDizi, ekstrasizlar: ekstrasizlar, kampanyalilarinCheckboxDegerleriDizi: kampanyalilarinCheckboxDegerleriDizi }),
                traditional: true,
                success: function (yazdirildiMi) {
                    //tamamiOdendiMi(yazdirilacakOturumId);
                    $.ajax({
                        url: "/Kasa/TamamiOdendiMi/" + yazdirilacakOturumId,
                        type: "POST",
                        dataType: "json",
                        success: function (odendiMi) {
                            if (odendiMi == true) {
                                //setInterval(function () {
                                location.reload(true);

                                //}, 3000);
                            }
                            else {
                                //setInterval(function () {
                                $("#helpModal_" + yazdirilacakOturumId).modal('toggle');
                                $("#helpModal2_" + yazdirilacakOturumId).empty();
                                $("#helpModal2_" + yazdirilacakOturumId).load("/Kasa/Kasa #helpModal_" + yazdirilacakOturumId, function () { $("#helpModal_" + yazdirilacakOturumId).modal("show"); });
                                //}, 3000);
                            }

                        }
                    });
                }

            });
            */
        }
    }
    function hesapla(oturumId) {
        var ekstrasizlarToplami = 0;
        var ekstralilarToplami = 0;
        var kampanyalarToplami = 0;

        $(document.getElementsByClassName('Ekstrasiz_' + oturumId)).each(function (item) {
            var ekstrasizFiyatDizi = $(this).val().split(',');
            var ekstrasizFiyat = "";
            if (ekstrasizFiyatDizi[1] == null) {
                ekstrasizFiyat = ekstrasizFiyatDizi[0];
            }
            else {
                ekstrasizFiyat = parseInt(ekstrasizFiyatDizi[0]) + '.' + parseInt(ekstrasizFiyatDizi[1]);
            }
            ekstrasizlarToplami += parseFloat(ekstrasizFiyat);

        });
        $(document.getElementsByClassName('ekstralilar_aratoplam_'+oturumId)).each(function () {
            var arr = $(this).val().split('_');
            var checked = $('#oturumId_' + oturumId + '_siparisUrunlerId_' + arr[3]).is(':checked');
            if (checked == true) {
                var urunFiyatDizisi = $('#Ekstralilar_value_oturumId_' + oturumId + '_siparisUrunlerId_' + arr[3]).val().split(',');
                var urunFiyat = "";
                if (urunFiyatDizisi[1] == null) {
                    urunFiyat = urunFiyatDizisi[0];
                }
                else {
                    urunFiyat = parseInt(urunFiyatDizisi[0]) + '.' + parseInt(urunFiyatDizisi[1]);
                }
                ekstralilarToplami += parseFloat(urunFiyat);
            }
        });
        $(document.getElementsByClassName('kampanyalar_aratoplam_' + oturumId)).each(function () {
            var arr2 = $(this).val().split('_');
            var checked2 = $('#oturumId_' + oturumId +'_oturumKampanyaId_' + arr2[1]).is(':checked');
            if (checked2 == true) {
                var kampanyaFiyatDizisi = $('#Kampanyalilar_value_oturumId_' + oturumId + '_oturumKampanyaId_' + arr2[1]).val().split(',');
                var kampanyaFiyat = "";
                if (kampanyaFiyatDizisi[1] == null) {
                    kampanyaFiyat = kampanyaFiyatDizisi[0];
                }
                else {
                    kampanyaFiyat = parseInt(kampanyaFiyatDizisi[0]) + '.' + parseInt(kampanyaFiyatDizisi[1]);
                }
                kampanyalarToplami += parseFloat(kampanyaFiyat);
            }
        });
        $('#araToplam_' + oturumId).val(parseFloat(ekstralilarToplami + ekstrasizlarToplami + kampanyalarToplami).toFixed(2));

    }
    function arttirAzalt(selectbox){
        var zimbirtiDegerleri = $(selectbox).attr('id').split('_');
        var oturumId = zimbirtiDegerleri[1];
        var urunOzellikId = zimbirtiDegerleri[3];
        var urunFiyatDizi = $('#Ekstrasiz_' + oturumId + '_urunOzellikId_' + urunOzellikId + '_urunFiyat').val().split(",");
        var urunFiyati = parseFloat(urunFiyatDizi[0]+"."+urunFiyatDizi[1]);
        var hesaplanacakAraToplam = '#Ekstrasiz_' + oturumId + '_urunOzellikId_' + urunOzellikId + '_araToplam';
        var adet=$(selectbox).val();
        $(hesaplanacakAraToplam).val(parseFloat(urunFiyati * adet));
    }


    function cikisYap() {
        var personelId = @Session["girenId"];
        var personelParola = $('#personelParola').val();
        if (personelId != "" && personelParola != "") {
            $.ajax({
                type: 'POST',
                url: '/Kasa/CikisKontrol/',
                dataType: 'json',
                data: { personelId: personelId, personelParola: personelParola, subeId: subeId },
                success: function (data2) {
                    if (data2 == 0) {
                        location.href = "/Kasa/YoneticiGiris";
                    }
                    else if (data2 == 1) {
                        alert("Yönetici Parolanızı Yanlış Girdiniz.");
                    }
                    else if (data2 == 2) {
                        alert("Çok sayıda yanlış deneme yaptığınız için bir süre sistemden uzaklaştırıldınız.");
                    }
                    else {

                    }
                }
            });
        }
        else {
            alert("Değerler boş olamaz");
        }
    }
</script>
</body>
</html>
